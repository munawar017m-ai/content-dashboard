{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sumee/OneDrive/Desktop/content-generation/lib/supabaseClient.ts"],"sourcesContent":["import { createPagesBrowserClient } from \"@supabase/auth-helpers-nextjs\";\r\n\r\nexport const supabase = createPagesBrowserClient({\r\n  supabaseUrl: process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  supabaseKey: process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n});\r\n"],"names":[],"mappings":";;;;AAGe;AAHf;;AAEO,MAAM,WAAW,IAAA,uMAAwB,EAAC;IAC/C,WAAW;IACX,WAAW;AACb"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sumee/OneDrive/Desktop/content-generation/app/library/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { supabase } from \"@/lib/supabaseClient\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\ntype ContentIdea = {\r\n  title?: string;\r\n  hook?: string;\r\n  script?: string;\r\n  caption?: string;\r\n  hashtags?: string[];\r\n  cta?: string;\r\n  explanation?: string;\r\n};\r\n\r\nconst STORAGE_KEY = \"cg_library_v1\";\r\n\r\nexport default function LibraryPage() {\r\n  const router = useRouter();\r\n  const [library, setLibrary] = useState<ContentIdea[]>([]);\r\n  const [open, setOpen] = useState<number | null>(null);\r\n  const [checkingAuth, setCheckingAuth] = useState(true);\r\n\r\n  // ✅ AUTH PROTECTION (SAFE)\r\n  useEffect(() => {\r\n    const checkAuth = async () => {\r\n      const { data } = await supabase.auth.getUser();\r\n      if (!data.user) {\r\n        router.replace(\"/login\");\r\n        return;\r\n      }\r\n      setCheckingAuth(false);\r\n    };\r\n    checkAuth();\r\n  }, [router]);\r\n\r\n  // ✅ LOAD FROM LOCAL STORAGE\r\n  useEffect(() => {\r\n    try {\r\n      const raw = localStorage.getItem(STORAGE_KEY);\r\n      if (raw) {\r\n        const parsed = JSON.parse(raw);\r\n        if (Array.isArray(parsed)) {\r\n          setLibrary(parsed);\r\n        }\r\n      }\r\n    } catch {\r\n      setLibrary([]);\r\n    }\r\n  }, []);\r\n\r\n  // ✅ DELETE SINGLE IDEA\r\n  const deleteIdea = (index: number) => {\r\n    setLibrary((prev) => {\r\n      const updated = prev.filter((_, i) => i !== index);\r\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(updated));\r\n      return updated;\r\n    });\r\n\r\n    if (open === index) setOpen(null);\r\n    else if (open !== null && open > index) setOpen(open - 1);\r\n  };\r\n\r\n  // ✅ CLEAR ALL IDEAS\r\n  const clearAll = () => {\r\n    setLibrary([]);\r\n    localStorage.removeItem(STORAGE_KEY);\r\n    setOpen(null);\r\n  };\r\n\r\n  // ✅ BLOCK UI UNTIL AUTH CHECK COMPLETES\r\n  if (checkingAuth) {\r\n    return <div style={{ padding: 40 }}>Checking authentication...</div>;\r\n  }\r\n\r\n  return (\r\n    <div style={styles.page}>\r\n      <div style={styles.header}>\r\n        <div>\r\n          <h1 style={{ margin: 0 }}>Content Library</h1>\r\n          <p style={{ fontSize: 14, color: \"#64748b\" }}>\r\n            All ideas you approved from the Workspace.\r\n          </p>\r\n        </div>\r\n\r\n        {library.length > 0 && (\r\n          <button style={styles.clearBtn} onClick={clearAll}>\r\n            Clear All\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {library.length === 0 && (\r\n        <div style={styles.empty}>\r\n          <h3>No saved ideas yet</h3>\r\n          <p>\r\n            Go to the <b>Content Workspace</b>, generate ideas and click{\" \"}\r\n            <b>Approve</b>.\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {library.map((idea, idx) => {\r\n        const expanded = open === idx;\r\n\r\n        return (\r\n          <div\r\n            key={idx}\r\n            style={{\r\n              ...styles.card,\r\n              ...(expanded ? styles.cardOpen : {}),\r\n            }}\r\n          >\r\n            <div\r\n              style={styles.cardHeader}\r\n              onClick={() => setOpen(expanded ? null : idx)}\r\n            >\r\n              <div>\r\n                <b>{idea.title ?? `Content Idea ${idx + 1}`}</b>\r\n                {idea.hook && (\r\n                  <p style={styles.muted}>\r\n                    {idea.hook.length > 80\r\n                      ? idea.hook.slice(0, 80) + \"...\"\r\n                      : idea.hook}\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              <div style={{ display: \"flex\", gap: 10 }}>\r\n                <button\r\n                  style={styles.deleteBtn}\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    deleteIdea(idx);\r\n                  }}\r\n                >\r\n                  Delete\r\n                </button>\r\n                <span>{expanded ? \"▲\" : \"▼\"}</span>\r\n              </div>\r\n            </div>\r\n\r\n            {expanded && (\r\n              <div style={styles.details}>\r\n                {idea.hook && <p><b>Hook:</b> {idea.hook}</p>}\r\n\r\n                {idea.script && (\r\n                  <pre style={styles.pre}><b>Script:</b>{\"\\n\"}{idea.script}</pre>\r\n                )}\r\n\r\n                {idea.caption && <p><b>Caption:</b> {idea.caption}</p>}\r\n\r\n                {idea.hashtags && (\r\n                  <p><b>Hashtags:</b> {idea.hashtags.join(\" \")}</p>\r\n                )}\r\n\r\n                {idea.cta && <p><b>CTA:</b> {idea.cta}</p>}\r\n\r\n                {idea.explanation && (\r\n                  <p style={{ fontStyle: \"italic\", color: \"#4b5563\" }}>\r\n                    {idea.explanation}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst styles: { [key: string]: React.CSSProperties } = {\r\n  page: {\r\n    maxWidth: 900,\r\n    margin: \"0 auto\",\r\n    padding: 32,\r\n    fontFamily: \"Arial, sans-serif\",\r\n  },\r\n  header: {\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    marginBottom: 20,\r\n  },\r\n  clearBtn: {\r\n    padding: \"8px 14px\",\r\n    background: \"#fee2e2\",\r\n    color: \"#991b1b\",\r\n    border: \"1px solid #fecaca\",\r\n    borderRadius: 6,\r\n    cursor: \"pointer\",\r\n  },\r\n  empty: {\r\n    background: \"#eef2ff\",\r\n    padding: 20,\r\n    borderRadius: 8,\r\n    border: \"1px dashed #c7d2fe\",\r\n  },\r\n  card: {\r\n    background: \"#fff\",\r\n    border: \"1px solid #e5e7eb\",\r\n    borderRadius: 8,\r\n    padding: 14,\r\n    marginBottom: 12,\r\n    cursor: \"pointer\",\r\n  },\r\n  cardOpen: {\r\n    borderColor: \"#2563eb\",\r\n    boxShadow: \"0 10px 20px rgba(37,99,235,0.15)\",\r\n  },\r\n  cardHeader: {\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"flex-start\",\r\n  },\r\n  muted: {\r\n    margin: \"4px 0 0\",\r\n    fontSize: 13,\r\n    color: \"#6b7280\",\r\n  },\r\n  deleteBtn: {\r\n    padding: \"5px 10px\",\r\n    borderRadius: 6,\r\n    border: \"1px solid #e5e7eb\",\r\n    background: \"#f3f4f6\",\r\n    cursor: \"pointer\",\r\n    fontSize: 12,\r\n  },\r\n  details: {\r\n    marginTop: 10,\r\n    borderTop: \"1px solid #e5e7eb\",\r\n    paddingTop: 10,\r\n    fontSize: 14,\r\n  },\r\n  pre: {\r\n    background: \"#f9fafb\",\r\n    padding: 8,\r\n    borderRadius: 6,\r\n    border: \"1px solid #e5e7eb\",\r\n    fontSize: 13,\r\n  },\r\n};\r\n"],"names":[],"mappings":"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"}}]
}