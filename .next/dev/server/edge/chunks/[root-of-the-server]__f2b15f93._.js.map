{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { createMiddlewareClient } from \"@supabase/auth-helpers-nextjs\";\r\nimport { NextResponse } from \"next/server\";\r\nimport type { NextRequest } from \"next/server\";\r\n\r\nexport async function middleware(req: NextRequest) {\r\n  const res = NextResponse.next();\r\n\r\n  const supabase = createMiddlewareClient({ req, res });\r\n\r\n  const {\r\n    data: { session },\r\n  } = await supabase.auth.getSession();\r\n\r\n  const isWorkspace = req.nextUrl.pathname.startsWith(\"/workspace\");\r\n  const isLibrary = req.nextUrl.pathname.startsWith(\"/library\");\r\n  const isLogin = req.nextUrl.pathname === \"/login\";\r\n  const isSignup = req.nextUrl.pathname === \"/signup\";\r\n\r\n  // ✅ BLOCK PRIVATE PAGES IF NOT LOGGED IN\r\n  if ((isWorkspace || isLibrary) && !session) {\r\n    return NextResponse.redirect(new URL(\"/login\", req.url));\r\n  }\r\n\r\n  // ✅ BLOCK LOGIN/SIGNUP IF ALREADY LOGGED IN\r\n  if ((isLogin || isSignup) && session) {\r\n    return NextResponse.redirect(new URL(\"/workspace\", req.url));\r\n  }\r\n\r\n  return res;\r\n}\r\n\r\nexport const config = {\r\n  matcher: [\"/workspace/:path*\", \"/library/:path*\", \"/login\", \"/signup\"],\r\n};\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAAA;;;AAGO,eAAe,WAAW,GAAgB;IAC/C,MAAM,MAAM,gMAAY,CAAC,IAAI;IAE7B,MAAM,WAAW,IAAA,0MAAsB,EAAC;QAAE;QAAK;IAAI;IAEnD,MAAM,EACJ,MAAM,EAAE,OAAO,EAAE,EAClB,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU;IAElC,MAAM,cAAc,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC;IACpD,MAAM,YAAY,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC;IAClD,MAAM,UAAU,IAAI,OAAO,CAAC,QAAQ,KAAK;IACzC,MAAM,WAAW,IAAI,OAAO,CAAC,QAAQ,KAAK;IAE1C,yCAAyC;IACzC,IAAI,CAAC,eAAe,SAAS,KAAK,CAAC,SAAS;QAC1C,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU,IAAI,GAAG;IACxD;IAEA,4CAA4C;IAC5C,IAAI,CAAC,WAAW,QAAQ,KAAK,SAAS;QACpC,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,cAAc,IAAI,GAAG;IAC5D;IAEA,OAAO;AACT;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;QAAqB;QAAmB;QAAU;KAAU;AACxE"}}]
}